# How to use SSH Port Forwarding

å¥½çš„ï¼è®©æˆ‘è¯¦ç»†è§£é‡Š SSH ç«¯å£è½¬å‘ï¼ˆSSH Port Forwardingï¼‰çš„å·¥ä½œåŽŸç†ã€‚

## SSH æœ¬åœ°ç«¯å£è½¬å‘ï¼ˆLocal Port Forwardingï¼‰

**å‘½ä»¤æ ¼å¼ï¼š**
```bash
ssh -L [æœ¬åœ°ç«¯å£]:[ç›®æ ‡ä¸»æœº]:[ç›®æ ‡ç«¯å£] [è¿œç¨‹æœåŠ¡å™¨ç”¨æˆ·å]@[è¿œç¨‹æœåŠ¡å™¨IP]
```

**ä½ çš„å‘½ä»¤ï¼š**
```bash
ssh -L 8888:localhost:8888 keystone@10.78.0.201
```

## å·¥ä½œåŽŸç†è¯¦è§£

### 1. **å‘½ä»¤åˆ†è§£**
- `-L 8888` - åœ¨**ä½ çš„æœ¬åœ°ç”µè„‘**ä¸Šç›‘å¬ 8888 ç«¯å£
- `localhost:8888` - ä»Ž**è¿œç¨‹æœåŠ¡å™¨**çš„è§’åº¦çœ‹ï¼Œè½¬å‘åˆ°å®ƒè‡ªå·±çš„ localhost:8888
- `keystone@10.78.0.201` - é€šè¿‡ SSH è¿žæŽ¥åˆ°è¿œç¨‹æœåŠ¡å™¨

### 2. **æ•°æ®æµå‘ç¤ºæ„**

```
ä½ çš„è¿œç¨‹ PC                    SSH éš§é“ï¼ˆåŠ å¯†ï¼‰                 æœåŠ¡å™¨ (10.78.0.201)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             â”‚               â”‚              â”‚              â”‚                 â”‚
â”‚  æµè§ˆå™¨     â”‚â”€â”€â‘ â”€â”€>  â”‚  æœ¬åœ°ç«¯å£   â”‚â”€â”€â‘¡â”€â”€>  â”‚  SSH è¿žæŽ¥   â”‚â”€â”€â‘¢â”€â”€> â”‚  localhost:8888 â”‚
â”‚             â”‚     8888      â”‚              â”‚    (åŠ å¯†)    â”‚                 â”‚
â”‚ localhost:  â”‚    <â”€â”€â‘¤â”€â”€â”‚              â”‚  <â”€â”€â‘£â”€â”€â”‚                 â”‚      Jupyter Labâ”‚
â”‚    8888     â”‚               â”‚              â”‚              â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. **è¯¦ç»†æ­¥éª¤**

**â‘  æœ¬åœ°è¯·æ±‚**
- ä½ åœ¨è¿œç¨‹ PC æµè§ˆå™¨è®¿é—® `http://localhost:8888`
- è¯·æ±‚å‘é€åˆ°æœ¬åœ°çš„ 8888 ç«¯å£

**â‘¡ SSH å®¢æˆ·ç«¯æŽ¥æ”¶**
- SSH å®¢æˆ·ç«¯ç›‘å¬æœ¬åœ° 8888 ç«¯å£
- æŽ¥æ”¶åˆ°æµè§ˆå™¨çš„è¯·æ±‚

**â‘¢ åŠ å¯†ä¼ è¾“**
- SSH å®¢æˆ·ç«¯é€šè¿‡**åŠ å¯†çš„ SSH è¿žæŽ¥**å°†è¯·æ±‚å‘é€åˆ°è¿œç¨‹æœåŠ¡å™¨
- æ‰€æœ‰æ•°æ®éƒ½ç»è¿‡ SSH åŠ å¯†ï¼Œå®‰å…¨å¯é 

**â‘£ è¿œç¨‹æœåŠ¡å™¨å¤„ç†**
- SSH æœåŠ¡å™¨ï¼ˆ10.78.0.201ï¼‰æ”¶åˆ°è¯·æ±‚
- å°†è¯·æ±‚è½¬å‘åˆ°å®ƒè‡ªå·±çš„ localhost:8888ï¼ˆJupyter Labï¼‰
- Jupyter Lab å¤„ç†è¯·æ±‚å¹¶è¿”å›žå“åº”

**â‘¤ è¿”å›žå“åº”**
- å“åº”é€šè¿‡ç›¸åŒçš„ SSH éš§é“è¿”å›ž
- æœ€ç»ˆæ˜¾ç¤ºåœ¨ä½ çš„æµè§ˆå™¨ä¸­

### 4. **å…³é”®ä¼˜åŠ¿**

**ðŸ”’ å®‰å…¨æ€§ï¼š**
- æ‰€æœ‰æµé‡éƒ½é€šè¿‡ SSH åŠ å¯†
- ä¸éœ€è¦åœ¨é˜²ç«å¢™ä¸Šå¼€æ”¾ 8888 ç«¯å£
- åªéœ€è¦ SSH ç«¯å£ï¼ˆé€šå¸¸æ˜¯ 22ï¼‰å¯è®¿é—®

**ðŸš€ ç»•è¿‡é˜²ç«å¢™ï¼š**
- é˜²ç«å¢™å¯èƒ½é˜»æ­¢ç›´æŽ¥è®¿é—® 8888 ç«¯å£
- ä½† SSH ç«¯å£é€šå¸¸æ˜¯å¼€æ”¾çš„
- é€šè¿‡ SSH éš§é“"é’»è¿‡"é˜²ç«å¢™é™åˆ¶

**ðŸŽ¯ çµæ´»æ€§ï¼š**
- å¯ä»¥è®¿é—®è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„ä»»ä½•æœåŠ¡
- å³ä½¿æœåŠ¡åªç›‘å¬ localhost ä¹Ÿèƒ½è®¿é—®

### 5. **å…¶ä»–å¸¸è§ç”¨æ³•**

**è®¿é—®è¿œç¨‹æ•°æ®åº“ï¼š**
```bash
ssh -L 3306:localhost:3306 user@remote-server
# çŽ°åœ¨å¯ä»¥ç”¨ localhost:3306 è®¿é—®è¿œç¨‹ MySQL
```

**é€šè¿‡è·³æ¿æœºè®¿é—®å†…ç½‘æœåŠ¡ï¼š**
```bash
ssh -L 8080:internal-server:80 user@jump-server
# é€šè¿‡è·³æ¿æœºè®¿é—®å†…ç½‘æœåŠ¡å™¨çš„ 80 ç«¯å£
```

**å¤šç«¯å£è½¬å‘ï¼š**
```bash
ssh -L 8888:localhost:8888 -L 6006:localhost:6006 user@server
# åŒæ—¶è½¬å‘å¤šä¸ªç«¯å£
```

### 6. **ç›¸å…³çš„å…¶ä»– SSH éš§é“ç±»åž‹**

**è¿œç¨‹ç«¯å£è½¬å‘ï¼ˆ-Rï¼‰ï¼š**
```bash
ssh -R 9000:localhost:8000 user@remote-server
# è®©è¿œç¨‹æœåŠ¡å™¨å¯ä»¥è®¿é—®ä½ æœ¬åœ°çš„æœåŠ¡
```

**åŠ¨æ€ç«¯å£è½¬å‘ï¼ˆ-Dï¼‰ï¼š**
```bash
ssh -D 1080 user@remote-server
# åˆ›å»º SOCKS ä»£ç†ï¼Œå¯ä»¥ä»£ç†æ‰€æœ‰æµé‡
```

### 7. **å®žé™…ä½¿ç”¨å»ºè®®**

ä¿æŒè¿žæŽ¥æ´»è·ƒï¼š
```bash
ssh -L 8888:localhost:8888 -o ServerAliveInterval=60 keystone@10.78.0.201
```

åŽå°è¿è¡Œï¼ˆä¸éœ€è¦ä¿æŒç»ˆç«¯æ‰“å¼€ï¼‰ï¼š
```bash
ssh -fN -L 8888:localhost:8888 keystone@10.78.0.201
# -f: åŽå°è¿è¡Œ
# -N: ä¸æ‰§è¡Œè¿œç¨‹å‘½ä»¤ï¼Œåªåšç«¯å£è½¬å‘
```

**æ€»ç»“ï¼šSSH ç«¯å£è½¬å‘å°±åƒåœ¨ä½ çš„ç”µè„‘å’Œè¿œç¨‹æœåŠ¡å™¨ä¹‹é—´å»ºç«‹äº†ä¸€æ¡åŠ å¯†çš„"ä¸“ç”¨é€šé“"ï¼Œè®©ä½ å¯ä»¥å®‰å…¨åœ°è®¿é—®è¿œç¨‹æœåŠ¡ï¼Œå°±åƒå®ƒä»¬è¿è¡Œåœ¨ä½ æœ¬åœ°ä¸€æ ·ï¼** ðŸš‡
